{"ast":null,"code":"import{useEffect,useState}from'react';import{apiFetch}from'../api/api';import{useAuth}from'../contexts/AuthContext';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";export default function Sidebar(_ref){let{onSelectTopic,selectedTopicId,onLogout,onProfile}=_ref;const{user}=useAuth();const[topics,setTopics]=useState([]);const[newTitle,setNewTitle]=useState('');useEffect(()=>{apiFetch('/topics').then(setTopics).catch(()=>{});},[user]);const addTopic=async()=>{if(!newTitle)return;const topic=await apiFetch('/topics',{method:'POST',body:JSON.stringify({title:newTitle})});setTopics([topic,...topics]);setNewTitle('');};return/*#__PURE__*/_jsxs(\"aside\",{className:\"w-64 bg-gray-900 text-white h-full flex flex-col p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 font-bold text-xl\",children:[\"Hi, \",user.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"flex-1 p-2 rounded text-black\",placeholder:\"New topic\",value:newTitle,onChange:e=>setNewTitle(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"ml-2 bg-blue-600 px-3 py-1 rounded\",onClick:addTopic,children:\"Add\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"flex-1 overflow-y-auto\",children:topics.map(t=>/*#__PURE__*/_jsx(\"li\",{className:\"p-2 rounded cursor-pointer \".concat(selectedTopicId===t.id?'bg-blue-700':'hover:bg-gray-700'),onClick:()=>onSelectTopic(t),children:t.title},t.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex flex-col gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-gray-700 py-2 rounded\",onClick:onProfile,children:\"Profile\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-600 py-2 rounded\",onClick:onLogout,children:\"Logout\"})]})]});}","map":{"version":3,"names":["useEffect","useState","apiFetch","useAuth","jsxs","_jsxs","jsx","_jsx","Sidebar","_ref","onSelectTopic","selectedTopicId","onLogout","onProfile","user","topics","setTopics","newTitle","setNewTitle","then","catch","addTopic","topic","method","body","JSON","stringify","title","className","children","name","placeholder","value","onChange","e","target","onClick","map","t","concat","id"],"sources":["/root/PesonaAI/src/components/Sidebar.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { apiFetch } from '../api/api';\nimport { useAuth } from '../contexts/AuthContext';\n\nexport default function Sidebar({ onSelectTopic, selectedTopicId, onLogout, onProfile }) {\n  const { user } = useAuth();\n  const [topics, setTopics] = useState([]);\n  const [newTitle, setNewTitle] = useState('');\n\n  useEffect(() => {\n    apiFetch('/topics').then(setTopics).catch(() => {});\n  }, [user]);\n\n  const addTopic = async () => {\n    if (!newTitle) return;\n    const topic = await apiFetch('/topics', { method: 'POST', body: JSON.stringify({ title: newTitle }) });\n    setTopics([topic, ...topics]);\n    setNewTitle('');\n  };\n\n  return (\n    <aside className=\"w-64 bg-gray-900 text-white h-full flex flex-col p-4\">\n      <div className=\"mb-4 font-bold text-xl\">Hi, {user.name}</div>\n      <div className=\"flex mb-4\">\n        <input className=\"flex-1 p-2 rounded text-black\" placeholder=\"New topic\" value={newTitle} onChange={e => setNewTitle(e.target.value)} />\n        <button className=\"ml-2 bg-blue-600 px-3 py-1 rounded\" onClick={addTopic}>Add</button>\n      </div>\n      <ul className=\"flex-1 overflow-y-auto\">\n        {topics.map(t => (\n          <li key={t.id} className={`p-2 rounded cursor-pointer ${selectedTopicId === t.id ? 'bg-blue-700' : 'hover:bg-gray-700'}`} onClick={() => onSelectTopic(t)}>\n            {t.title}\n          </li>\n        ))}\n      </ul>\n      <div className=\"mt-4 flex flex-col gap-2\">\n        <button className=\"bg-gray-700 py-2 rounded\" onClick={onProfile}>Profile</button>\n        <button className=\"bg-red-600 py-2 rounded\" onClick={onLogout}>Logout</button>\n      </div>\n    </aside>\n  );\n} "],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,QAAQ,KAAQ,YAAY,CACrC,OAASC,OAAO,KAAQ,yBAAyB,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,yBAElD,cAAe,SAAS,CAAAC,OAAOA,CAAAC,IAAA,CAA0D,IAAzD,CAAEC,aAAa,CAAEC,eAAe,CAAEC,QAAQ,CAAEC,SAAU,CAAC,CAAAJ,IAAA,CACrF,KAAM,CAAEK,IAAK,CAAC,CAAGX,OAAO,CAAC,CAAC,CAC1B,KAAM,CAACY,MAAM,CAAEC,SAAS,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACgB,QAAQ,CAAEC,WAAW,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAE5CD,SAAS,CAAC,IAAM,CACdE,QAAQ,CAAC,SAAS,CAAC,CAACiB,IAAI,CAACH,SAAS,CAAC,CAACI,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC,CACrD,CAAC,CAAE,CAACN,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAO,QAAQ,CAAG,KAAAA,CAAA,GAAY,CAC3B,GAAI,CAACJ,QAAQ,CAAE,OACf,KAAM,CAAAK,KAAK,CAAG,KAAM,CAAApB,QAAQ,CAAC,SAAS,CAAE,CAAEqB,MAAM,CAAE,MAAM,CAAEC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,KAAK,CAAEV,QAAS,CAAC,CAAE,CAAC,CAAC,CACtGD,SAAS,CAAC,CAACM,KAAK,CAAE,GAAGP,MAAM,CAAC,CAAC,CAC7BG,WAAW,CAAC,EAAE,CAAC,CACjB,CAAC,CAED,mBACEb,KAAA,UAAOuB,SAAS,CAAC,sDAAsD,CAAAC,QAAA,eACrExB,KAAA,QAAKuB,SAAS,CAAC,wBAAwB,CAAAC,QAAA,EAAC,MAAI,CAACf,IAAI,CAACgB,IAAI,EAAM,CAAC,cAC7DzB,KAAA,QAAKuB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtB,IAAA,UAAOqB,SAAS,CAAC,+BAA+B,CAACG,WAAW,CAAC,WAAW,CAACC,KAAK,CAAEf,QAAS,CAACgB,QAAQ,CAAEC,CAAC,EAAIhB,WAAW,CAACgB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAAE,CAAC,cACxIzB,IAAA,WAAQqB,SAAS,CAAC,oCAAoC,CAACQ,OAAO,CAAEf,QAAS,CAAAQ,QAAA,CAAC,KAAG,CAAQ,CAAC,EACnF,CAAC,cACNtB,IAAA,OAAIqB,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CACnCd,MAAM,CAACsB,GAAG,CAACC,CAAC,eACX/B,IAAA,OAAeqB,SAAS,+BAAAW,MAAA,CAAgC5B,eAAe,GAAK2B,CAAC,CAACE,EAAE,CAAG,aAAa,CAAG,mBAAmB,CAAG,CAACJ,OAAO,CAAEA,CAAA,GAAM1B,aAAa,CAAC4B,CAAC,CAAE,CAAAT,QAAA,CACvJS,CAAC,CAACX,KAAK,EADDW,CAAC,CAACE,EAEP,CACL,CAAC,CACA,CAAC,cACLnC,KAAA,QAAKuB,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCtB,IAAA,WAAQqB,SAAS,CAAC,0BAA0B,CAACQ,OAAO,CAAEvB,SAAU,CAAAgB,QAAA,CAAC,SAAO,CAAQ,CAAC,cACjFtB,IAAA,WAAQqB,SAAS,CAAC,yBAAyB,CAACQ,OAAO,CAAExB,QAAS,CAAAiB,QAAA,CAAC,QAAM,CAAQ,CAAC,EAC3E,CAAC,EACD,CAAC,CAEZ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}