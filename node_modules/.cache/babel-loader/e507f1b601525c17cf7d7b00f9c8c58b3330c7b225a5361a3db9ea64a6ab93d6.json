{"ast":null,"code":"import _objectSpread from\"/root/PesonaAI/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState}from'react';import{apiFetch}from'../api/api';import{useAuth}from'../contexts/AuthContext';import Toast from'./Toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProfileForm(_ref){let{onClose}=_ref;const{user,logout}=useAuth();const[name,setName]=useState(user.name);const[email,setEmail]=useState(user.email);const[password,setPassword]=useState('');const[toast,setToast]=useState(null);const handleUpdate=async e=>{e.preventDefault();try{await apiFetch('/auth/profile',{method:'PUT',body:JSON.stringify({name,email,password:password||undefined})});setToast({message:'Profile updated',type:'success'});}catch(err){setToast({message:err.message,type:'error'});}};const handleDelete=async()=>{if(!window.confirm('Are you sure you want to delete your account?'))return;await apiFetch('/auth/profile',{method:'DELETE'});logout();};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpdate,className:\"max-w-sm mx-auto mt-16 p-6 bg-white rounded shadow\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl mb-4\",children:\"Profile\"}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full mb-2 p-2 border rounded\",placeholder:\"Name\",value:name,onChange:e=>setName(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full mb-2 p-2 border rounded\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full mb-4 p-2 border rounded\",type:\"password\",placeholder:\"New Password\",value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"w-full bg-blue-600 text-white py-2 rounded\",type:\"submit\",children:\"Update\"}),/*#__PURE__*/_jsx(\"button\",{className:\"w-full bg-red-600 text-white py-2 rounded mt-2\",type:\"button\",onClick:handleDelete,children:\"Delete Account\"}),/*#__PURE__*/_jsx(\"button\",{className:\"w-full bg-gray-400 text-white py-2 rounded mt-2\",type:\"button\",onClick:onClose,children:\"Close\"}),/*#__PURE__*/_jsx(Toast,_objectSpread(_objectSpread({},toast),{},{onClose:()=>setToast(null)}))]});}","map":{"version":3,"names":["useState","apiFetch","useAuth","Toast","jsx","_jsx","jsxs","_jsxs","ProfileForm","_ref","onClose","user","logout","name","setName","email","setEmail","password","setPassword","toast","setToast","handleUpdate","e","preventDefault","method","body","JSON","stringify","undefined","message","type","err","handleDelete","window","confirm","onSubmit","className","children","placeholder","value","onChange","target","onClick","_objectSpread"],"sources":["/root/PesonaAI/src/components/ProfileForm.jsx"],"sourcesContent":["import { useState } from 'react';\nimport { apiFetch } from '../api/api';\nimport { useAuth } from '../contexts/AuthContext';\nimport Toast from './Toast';\n\nexport default function ProfileForm({ onClose }) {\n  const { user, logout } = useAuth();\n  const [name, setName] = useState(user.name);\n  const [email, setEmail] = useState(user.email);\n  const [password, setPassword] = useState('');\n  const [toast, setToast] = useState(null);\n\n  const handleUpdate = async e => {\n    e.preventDefault();\n    try {\n      await apiFetch('/auth/profile', { method: 'PUT', body: JSON.stringify({ name, email, password: password || undefined }) });\n      setToast({ message: 'Profile updated', type: 'success' });\n    } catch (err) {\n      setToast({ message: err.message, type: 'error' });\n    }\n  };\n\n  const handleDelete = async () => {\n    if (!window.confirm('Are you sure you want to delete your account?')) return;\n    await apiFetch('/auth/profile', { method: 'DELETE' });\n    logout();\n  };\n\n  return (\n    <form onSubmit={handleUpdate} className=\"max-w-sm mx-auto mt-16 p-6 bg-white rounded shadow\">\n      <h2 className=\"text-2xl mb-4\">Profile</h2>\n      <input className=\"w-full mb-2 p-2 border rounded\" placeholder=\"Name\" value={name} onChange={e => setName(e.target.value)} />\n      <input className=\"w-full mb-2 p-2 border rounded\" placeholder=\"Email\" value={email} onChange={e => setEmail(e.target.value)} />\n      <input className=\"w-full mb-4 p-2 border rounded\" type=\"password\" placeholder=\"New Password\" value={password} onChange={e => setPassword(e.target.value)} />\n      <button className=\"w-full bg-blue-600 text-white py-2 rounded\" type=\"submit\">Update</button>\n      <button className=\"w-full bg-red-600 text-white py-2 rounded mt-2\" type=\"button\" onClick={handleDelete}>Delete Account</button>\n      <button className=\"w-full bg-gray-400 text-white py-2 rounded mt-2\" type=\"button\" onClick={onClose}>Close</button>\n      <Toast {...toast} onClose={() => setToast(null)} />\n    </form>\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}